import{E as ae}from"./Ytyh4x8J.js";import{E as le,a as ne}from"./zXRaGYtN.js";import{m as P,p as O,q as L,s as v,P as re,o as h,v as T,w as r,C as A,y as I,z as n,Q as K,A as U,H as B,J as D,R as w,S as N,U as ue,V,W as ie,X as ce,r as b,Y as pe,Z as de,c as me,b as l,M as fe,O as _e,d as x,t as ge,a as ye}from"./ZH-tWQHg.js";import{E as be}from"./BAH4CgVp.js";import{E as ve,a as Ce,b as $e}from"./w7hH7UfE.js";import"./C_7zmDhA.js";import{u as we}from"./CXlMjUGj.js";import{u as Ne}from"./C-5bLHQg.js";import{u as E}from"./Brt4BjZS.js";import"./mRE_0vaE.js";const F=Symbol("rowContextKey"),Se=["start","center","end","space-around","space-between","space-evenly"],Re=["top","middle","bottom"],xe=P({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Se,default:"start"},align:{type:String,values:Re}}),Ee=O({name:"ElRow"}),Oe=O({...Ee,props:xe,setup(g){const a=g,u=L("row"),c=v(()=>a.gutter);re(F,{gutter:c});const f=v(()=>{const t={};return a.gutter&&(t.marginRight=t.marginLeft=`-${a.gutter/2}px`),t}),C=v(()=>[u.b(),u.is(`justify-${a.justify}`,a.justify!=="start"),u.is(`align-${a.align}`,!!a.align)]);return(t,y)=>(h(),T(U(t.tag),{class:I(n(C)),style:K(n(f))},{default:r(()=>[A(t.$slots,"default")]),_:3},8,["class","style"]))}});var he=B(Oe,[["__file","row.vue"]]);const je=D(he),ke=P({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:w([Number,Object]),default:()=>N({})},sm:{type:w([Number,Object]),default:()=>N({})},md:{type:w([Number,Object]),default:()=>N({})},lg:{type:w([Number,Object]),default:()=>N({})},xl:{type:w([Number,Object]),default:()=>N({})}}),Ve=O({name:"ElCol"}),Pe=O({...Ve,props:ke,setup(g){const a=g,{gutter:u}=ue(F,{gutter:v(()=>0)}),c=L("col"),f=v(()=>{const t={};return u.value&&(t.paddingLeft=t.paddingRight=`${u.value/2}px`),t}),C=v(()=>{const t=[];return["span","offset","pull","push"].forEach(s=>{const d=a[s];V(d)&&(s==="span"?t.push(c.b(`${a[s]}`)):d>0&&t.push(c.b(`${s}-${a[s]}`)))}),["xs","sm","md","lg","xl"].forEach(s=>{V(a[s])?t.push(c.b(`${s}-${a[s]}`)):ie(a[s])&&Object.entries(a[s]).forEach(([d,i])=>{t.push(d!=="span"?c.b(`${s}-${d}-${i}`):c.b(`${s}-${i}`))})}),u.value&&t.push(c.is("guttered")),[c.b(),t]});return(t,y)=>(h(),T(U(t.tag),{class:I(n(C)),style:K(n(f))},{default:r(()=>[A(t.$slots,"default")]),_:3},8,["class","style"]))}});var Le=B(Pe,[["__file","col.vue"]]);const Te=D(Le),Ae=ce("roomStore",()=>{const g=b([]);return{roomLists:g,setRoomList:u=>{g.value=u}}}),Ie={style:{margin:"15px"}},Ke={class:"btn-group",style:{display:"flex"}},Qe={__name:"index",async setup(g){let a,u;we();const f=fe().public.apiUrl,C=Ae(),{roomLists:t}=pe(C),{setRoomList:y}=C,$=b(!0),s=b(1),d=b(2),i=b(),m=b({room_No:"",description:"",max_Audience:0,deleted:"0",room_Id:""}),H=b({room_No:[{required:!0,message:"必填",trigger:"blur"}],description:[{required:!0,message:"必填",trigger:"blur"}]}),q=v(()=>{const o=JSON.parse(JSON.stringify(t.value)),e=(s.value-1)*d.value,p=s.value*d.value;return o.slice(e,p)});[a,u]=de(async()=>Ne("getRoomList",async()=>{const o=await E(`${f}/ServiceCenter/GetRooms`,null,!1);return y(o.data),o})),await a,u();const z=o=>{s.value=o},J=o=>{o&&o.validate(e=>{e?$.value?W(m.value):X(m.value):_e({message:"資料填寫錯誤",type:"error",duration:5e3,showClose:!0})})},G=o=>{o&&(o.resetFields(),$.value=!0)},M=o=>{m.value={...m.value,...o},$.value=!1},Q=o=>{Y(o)},W=async o=>{var p;const e=await E(`${f}/ServiceCenter/AddRoom`,{method:"POST",body:o});e.isOK&&(y(e.data),s.value=1,(p=i==null?void 0:i.value)==null||p.resetFields())},X=async o=>{var p;const e=await E(`${f}/ServiceCenter/UpdRoom`,{method:"POST",body:o});e.isOK&&(y(e.data),s.value=1,(p=i==null?void 0:i.value)==null||p.resetFields())},Y=async o=>{const e=await E(`${f}/ServiceCenter/DelRoom`,{method:"POST",body:[o]});e.isOK&&y(e.data)};return(o,e)=>{const p=ae,j=ne,k=Te,Z=je,ee=le,S=be,R=$e,te=ve,oe=Ce;return h(),me("div",Ie,[l(ee,{ref_key:"formRef",ref:i,"label-position":"top","require-asterisk-position":"right","scroll-to-error":"",model:n(m),rules:n(H)},{default:r(()=>[l(Z,{gutter:20},{default:r(()=>[l(k,{span:6},{default:r(()=>[l(j,{label:"教室編號",prop:"room_No"},{default:r(()=>[l(p,{modelValue:n(m).room_No,"onUpdate:modelValue":e[0]||(e[0]=_=>n(m).room_No=_)},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{span:6},{default:r(()=>[l(j,{label:"廠區代號+教室名稱",prop:"description"},{default:r(()=>[l(p,{modelValue:n(m).description,"onUpdate:modelValue":e[1]||(e[1]=_=>n(m).description=_)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"]),l(S,{type:"primary",plain:"",onClick:e[2]||(e[2]=_=>J(n(i)))},{default:r(()=>[x(ge(n($)?"新增":"修改"),1)]),_:1}),l(S,{plain:"",onClick:e[3]||(e[3]=_=>G(n(i)))},{default:r(()=>e[4]||(e[4]=[x("清除")])),_:1}),l(te,{style:{"margin-top":"20px"},data:n(q),"table-layout":"auto","row-key":"room_Id"},{default:r(()=>[l(R,{prop:"room_Id",label:"room_Id"}),l(R,{prop:"room_No",label:"room_No"}),l(R,{prop:"description",label:"description"}),l(R,{width:"60",label:"Views"},{default:r(({row:_})=>[ye("div",Ke,[l(S,{size:"small",type:"primary",onClick:se=>M(_)},{default:r(()=>e[5]||(e[5]=[x("修改")])),_:2},1032,["onClick"]),l(S,{size:"small",type:"danger",onClick:se=>Q(_)},{default:r(()=>e[6]||(e[6]=[x("刪除")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),l(oe,{style:{"margin-top":"10px"},class:"card-list-pagination mt-4 mb-0",layout:"prev, pager, next, jumper","page-size":n(d),total:n(t).length,"current-page":n(s),onCurrentChange:z},null,8,["page-size","total","current-page"])])}}};export{Qe as default};
