import{r as y,W as H,c5 as R,X as j,s as V,c6 as X,ab as b,w as G,aa as K,b as U,aA as W,aB as Y,b9 as A,ax as Z,a1 as D,U as z,c7 as x,b6 as $,L as F,b2 as J,c8 as Q,bk as O,c4 as ee,c2 as te,x as S}from"./BLCiv-1G.js";function oe(t){let e;const o=y(!1),n=H({...t,originalPosition:"",originalOverflow:"",visible:!1});function s(a){n.text=a}function r(){const a=n.parent,u=v.ns;if(!a.vLoadingAddClassList){let d=a.getAttribute("loading-number");d=Number.parseInt(d)-1,d?a.setAttribute("loading-number",d.toString()):(A(a,u.bm("parent","relative")),a.removeAttribute("loading-number")),A(a,u.bm("parent","hidden"))}l(),m.unmount()}function l(){var a,u;(u=(a=v.$el)==null?void 0:a.parentNode)==null||u.removeChild(v.$el)}function i(){var a;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=setTimeout(c,400),n.visible=!1,(a=t.closed)==null||a.call(t))}function c(){if(!o.value)return;const a=n.parent;o.value=!1,a.vLoadingAddClassList=void 0,r()}const f=V({name:"ElLoading",setup(a,{expose:u}){const{ns:d,zIndex:_}=X("loading");return u({ns:d,zIndex:_}),()=>{const h=n.spinner||n.svg,w=b("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...h?{innerHTML:h}:{}},[b("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),p=n.text?b("p",{class:d.b("text")},[n.text]):void 0;return b(Y,{name:d.b("fade"),onAfterLeave:c},{default:G(()=>[K(U("div",{style:{backgroundColor:n.background||""},class:[d.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[b("div",{class:d.b("spinner")},[w,p])]),[[W,n.visible]])])})}}}),m=R(f),v=m.mount(document.createElement("div"));return{...j(n),setText:s,removeElLoadingChild:l,close:i,handleAfterLeave:c,vm:v,get $el(){return v.$el}}}let k;const ne=function(t={}){if(!Z)return;const e=ae(t);if(e.fullscreen&&k)return k;const o=oe({...e,closed:()=>{var s;(s=e.closed)==null||s.call(e),e.fullscreen&&(k=void 0)}});re(e,e.parent,o),B(e,e.parent,o),e.parent.vLoadingAddClassList=()=>B(e,e.parent,o);let n=e.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",e.parent.setAttribute("loading-number",n),e.parent.appendChild(o.$el),D(()=>o.visible.value=e.visible),e.fullscreen&&(k=o),o},ae=t=>{var e,o,n,s;let r;return z(t.target)?r=(e=document.querySelector(t.target))!=null?e:document.body:r=t.target||document.body,{parent:r===document.body||t.body?document.body:r,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:r===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(n=t.lock)!=null?n:!1,customClass:t.customClass||"",visible:(s=t.visible)!=null?s:!0,beforeClose:t.beforeClose,closed:t.closed,target:r}},re=async(t,e,o)=>{const{nextZIndex:n}=o.vm.zIndex||o.vm._.exposed.zIndex,s={};if(t.fullscreen)o.originalPosition.value=x(document.body,"position"),o.originalOverflow.value=x(document.body,"overflow"),s.zIndex=n();else if(t.parent===document.body){o.originalPosition.value=x(document.body,"position"),await D();for(const r of["top","left"]){const l=r==="top"?"scrollTop":"scrollLeft";s[r]=`${t.target.getBoundingClientRect()[r]+document.body[l]+document.documentElement[l]-Number.parseInt(x(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])s[r]=`${t.target.getBoundingClientRect()[r]}px`}else o.originalPosition.value=x(e,"position");for(const[r,l]of Object.entries(s))o.$el.style[r]=l},B=(t,e,o)=>{const n=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?A(e,n.bm("parent","relative")):$(e,n.bm("parent","relative")),t.fullscreen&&t.lock?$(e,n.bm("parent","hidden")):A(e,n.bm("parent","hidden"))},T=Symbol("ElLoading"),E=(t,e)=>{var o,n,s,r;const l=e.instance,i=a=>F(e.value)?e.value[a]:void 0,c=a=>{const u=z(a)&&(l==null?void 0:l[a])||a;return u&&y(u)},f=a=>c(i(a)||t.getAttribute(`element-loading-${Q(a)}`)),m=(o=i("fullscreen"))!=null?o:e.modifiers.fullscreen,v={text:f("text"),svg:f("svg"),svgViewBox:f("svgViewBox"),spinner:f("spinner"),background:f("background"),customClass:f("customClass"),fullscreen:m,target:(n=i("target"))!=null?n:m?void 0:t,body:(s=i("body"))!=null?s:e.modifiers.body,lock:(r=i("lock"))!=null?r:e.modifiers.lock};t[T]={options:v,instance:ne(v)}},se=(t,e)=>{for(const o of Object.keys(e))J(e[o])&&(e[o].value=t[o])},de={mounted(t,e){e.value&&E(t,e)},updated(t,e){const o=t[T];e.oldValue!==e.value&&(e.value&&!e.oldValue?E(t,e):e.value&&e.oldValue?F(e.value)&&se(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[T])==null||e.instance.close(),t[T]=null}};function le(t,e){const o=e/t*100;return 2/Math.PI*100*Math.atan(o/50)}function ie(t={}){const{duration:e=2e3,throttle:o=200,hideDelay:n=500,resetDelay:s=400}=t,r=t.estimatedProgress||le,l=O(),i=y(0),c=y(!1),f=y(!1);let m=!1,v,a,u,d;const _=()=>{f.value=!1,h(0)};function h(g=0){if(!l.isHydrating){if(g>=100)return p();C(),i.value=g<0?0:g,o?a=setTimeout(()=>{c.value=!0,P()},o):(c.value=!0,P())}}function w(){u=setTimeout(()=>{c.value=!1,d=setTimeout(()=>{i.value=0},s)},n)}function p(g={}){i.value=100,m=!0,C(),M(),g.error&&(f.value=!0),g.force?(i.value=0,c.value=!1):w()}function M(){clearTimeout(u),clearTimeout(d)}function C(){clearTimeout(a),cancelAnimationFrame(v)}function P(){m=!1;let g;function L(I){if(m)return;g??(g=I);const q=I-g;i.value=Math.max(0,Math.min(100,r(e,q))),v=requestAnimationFrame(L)}v=requestAnimationFrame(L)}let N=()=>{};{const g=l.hook("page:loading:start",()=>{_()}),L=l.hook("page:loading:end",()=>{p()}),I=l.hook("vue:error",()=>p());N=()=>{I(),g(),L(),C()}}return{_cleanup:N,progress:S(()=>i.value),isLoading:S(()=>c.value),error:S(()=>f.value),start:_,set:h,finish:p,clear:C}}function ue(t={}){const e=O(),o=e._loadingIndicator=e._loadingIndicator||ie(t);return ee()&&(e._loadingIndicatorDeps=e._loadingIndicatorDeps||0,e._loadingIndicatorDeps++,te(()=>{e._loadingIndicatorDeps--,e._loadingIndicatorDeps===0&&(o._cleanup(),delete e._loadingIndicator)})),o}const fe=V({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},errorColor:{type:String,default:"repeating-linear-gradient(to right,#f87171 0%,#ef4444 100%)"},estimatedProgress:{type:Function,required:!1}},setup(t,{slots:e,expose:o}){const{progress:n,isLoading:s,error:r,start:l,finish:i,clear:c}=ue({duration:t.duration,throttle:t.throttle,estimatedProgress:t.estimatedProgress});return o({progress:n,isLoading:s,error:r,start:l,finish:i,clear:c}),()=>b("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${t.height}px`,opacity:s.value?1:0,background:r.value?t.errorColor:t.color||void 0,backgroundSize:`${100/n.value*100}% auto`,transform:`scaleX(${n.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},e)}});export{fe as _,de as v};
